# async_client
async client and API on FAST API with DB (SQLModel connection, API pytest control)

Асинхронный автономный клиент извлекат данные о двух тикетах BTC и ETH с сайта deribit.com и сохраняет их в формате записи {id,ticket,price,date} 

Cервис предоставляет методы для работы с базой данных, основанной на изменениях BTC и ETH. Также реализовано подключения к БД и хранению данных в ней (В текущем проекте SQLlite).

Основные классы:

• test_currency=Currency({'id':"special_id", 'ticket':"name", 'price':15.00, 'date':"some date in YYYY-MM-DD format"})

Основные обозначения:
• ticket_name - имя валюты для анализа ("BTC" или "ETH")
• date - дата для анализа (передавать в формате YYYY-MM-DD, в БД храниться в формате UNIX timestamp)

Основные функции контроля валют:

• Вся история изменений: Просмотрите всю историю изменений валюты get_story_price("ticket_name"). 
• Последнее изменение: Просмотрите последнюю запись об изменении валюты get_curr_price("ticket_name").
• История изменений по дате: Просмотрите всю историю изменений валюты по дате get_story_price("ticket_name",date).

Как использовать сервис:

Для работы с сервисом вам необходимо из рабочей директории запустить API через терминал командой "uvicorn main:app", далее из той же директории запустить async_client.
Взаимодействие с сервисом осуществляется через файл client.py путем запуска нужной функции.

Для запуска проверки работоспособности API клиента через pytest, необходимо сперва запустить API, а далее уже запустить тесты через терминал.

С вопросами и предложениями @fomin_ad22 tg
